-- Configuration
local highlightColor = Color3.fromRGB(0, 255, 255)  -- Cyan color for highlighting
local boxThickness = 0.1  -- Thickness of the highlight box

-- Function to highlight a player
local function highlightPlayer(player)
    local character = player.Character
    if character then
        -- Create a box around the player's torso
        local torso = character:FindFirstChild("UpperTorso") or character:FindFirstChild("Torso")
        if torso then
            local box = Instance.new("SelectionBox")
            box.Adornee = torso
            box.Color3 = highlightColor
            box.LineThickness = boxThickness
            box.Parent = torso
            
            -- Clean up the box when player leaves
            player.CharacterRemoving:Connect(function()
                box:Destroy()
            end)
        end
        
        -- Show player's username above their head
        local humanoid = character:FindFirstChildOfClass("Humanoid")
        if humanoid then
            local tag = Instance.new("BillboardGui")
            tag.Adornee = humanoid.Parent:WaitForChild("Head")
            tag.Size = UDim2.new(0, 100, 0, 20)
            tag.StudsOffset = Vector3.new(0, 2, 0)
            tag.Name = "PlayerTag"
            
            local textLabel = Instance.new("TextLabel", tag)
            textLabel.Size = UDim2.new(1, 0, 1, 0)
            textLabel.Text = player.Name
            textLabel.TextColor3 = Color3.new(1, 1, 1)
            textLabel.Font = Enum.Font.SourceSans
            textLabel.TextSize = 14
            textLabel.BackgroundTransparency = 1
            
            -- Clean up the tag when player leaves
            player.CharacterRemoving:Connect(function()
                tag:Destroy()
            end)
        end
    end
end

-- Highlight all players currently in the game
local function highlightAllPlayers()
    for _, player in ipairs(game.Players:GetPlayers()) do
        highlightPlayer(player)
    end
end

-- Run the highlighting function for existing players and listen for new ones
highlightAllPlayers()
game.Players.PlayerAdded:Connect(highlightPlayer)
